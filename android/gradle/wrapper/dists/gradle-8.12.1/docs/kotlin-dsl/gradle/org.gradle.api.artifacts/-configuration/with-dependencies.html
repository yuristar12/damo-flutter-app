<!DOCTYPE html>
<html class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>withDependencies</title>
    <link href="../../../images/logo-icon.svg" rel="icon" type="image/svg">
    <script>var pathToRoot = "../../../";</script>
    <script>document.documentElement.classList.replace("no-js","js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="https://unpkg.com/kotlin-playground@1/dist/playground.min.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async="async"></script>
<link href="../../../styles/style.css" rel="Stylesheet">
<link href="../../../styles/main.css" rel="Stylesheet">
<link href="../../../styles/prism.css" rel="Stylesheet">
<link href="../../../styles/logo-styles.css" rel="Stylesheet">
<link href="../../../styles/font-jb-sans-auto.css" rel="Stylesheet">
<script type="text/javascript" src="../../../scripts/clipboard.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/navigation-loader.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/platform-content-handler.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/main.js" defer="defer"></script>
<script type="text/javascript" src="../../../scripts/prism.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/symbol-parameters-wrapper_deferred.js" defer="defer"></script>
<link href="../../../images/gradle-logo.svg">
<link href="../../../styles/gradle.css" rel="Stylesheet">
</head>
<body>
    <div class="root">
<nav class="navigation" id="navigation-wrapper">
    <div class="navigation--inner">
        <div class="navigation-title">
            <button class="menu-toggle" id="menu-toggle" type="button">toggle menu</button>
            <div class="library-name">
                    <a class="library-name--link" href="../../../index.html">
                            gradle
                    </a>
            </div>
            <div class="library-version">
8.12.1            </div>
        </div>
        <div class="filter-section" id="filter-section">
                <button class="platform-tag platform-selector jvm-like" data-active="" data-filter=":docs/java_api">API</button>
        </div>
    </div>
    <div class="navigation-controls">
        <button class="navigation-controls--btn navigation-controls--theme" id="theme-toggle-button" type="button">switch theme</button>
        <div class="navigation-controls--btn navigation-controls--search" id="searchBar" role="button">search in API</div>
    </div>
</nav>
        <div id="container">
            <div class="sidebar" id="leftColumn">
                <div class="sidebar--inner" id="sideMenu"></div>
            </div>
            <div id="main">
<div class="main-content" data-page-type="member" id="content" pageIds="gradle::org.gradle.api.artifacts/Configuration/withDependencies/#org.gradle.api.Action&lt;? super org.gradle.api.artifacts.DependencySet&gt;/PointingToDeclaration//-1793262594">
  <div class="breadcrumbs"><a href="../../../index.html">gradle</a><span class="delimiter">/</span><a href="../index.html">org.gradle.api.artifacts</a><span class="delimiter">/</span><a href="index.html">Configuration</a><span class="delimiter">/</span><span class="current">withDependencies</span></div>
  <div class="cover ">
    <h1 class="cover"><span>with</span><wbr></wbr><span><span>Dependencies</span></span></h1>
  </div>
  <div class="platform-hinted  with-platform-tabs" data-platform-hinted="data-platform-hinted">
    <div class="platform-bookmarks-row" data-toggle-list="data-toggle-list"><button class="platform-bookmark" data-filterable-current=":docs/java_api" data-filterable-set=":docs/java_api" data-active="" data-toggle=":docs/java_api">API</button></div>
<div class="content sourceset-dependent-content" data-active="" data-togglable=":docs/java_api"><div class="symbol monospace"><span class="token keyword">abstract </span><span class="token keyword">fun </span><a href="with-dependencies.html"><span class="token function">withDependencies</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">action<span class="token operator">: </span><a href="../../org.gradle.api/-action/index.html">Action</a><span class="token operator">&lt;</span><span class="token keyword">in </span><a href="../-dependency-set/index.html">DependencySet</a><span class="token operator">&gt;</span></span></span><span class="token punctuation">)</span><span class="token operator">: </span><a href="index.html">Configuration</a><span class="clearfix"><span class="floating-right">(<a href="https://github.com/gradle/gradle/blob/0b1ee1ff81d1f4a26574ff4a362ac9180852b140/subprojects/core-api/src/main/java//org/gradle/api/artifacts/Configuration.java#L569">source</a>)</span></span></div><p class="paragraph">Execute the given action before the configuration first participates in dependency resolution. Actions will be executed in the order provided. A configuration will participate in dependency resolution when: </p><ul><li>The <a href="index.html">Configuration</a> itself is resolved</li><li>The <a href="index.html">Configuration</a> is published to a repository</li><li>The <a href="index.html">Configuration</a> is consumed as a variant by another project</li><li>Another <a href="index.html">Configuration</a> that extends this one is resolved, published, or consumed</li></ul><p class="paragraph"> In general, this method should be avoided in favor of other lazy APIs. However, in some cases where lazy APIs are not yet available, this method can be used to perform actions before the configuration is used. </p><p class="paragraph"> Despite the method's name, callbacks registered on this method should not add dependencies to the configuration or mutate the dependencies already present on the configuration. Instead, use the <a href="../../org.gradle.api.provider/-provider/index.html">Provider</a>-accepting methods on <a href="../-dependency-set/index.html">DependencySet</a> and <a href="../-dependency-constraint-set/index.html">DependencyConstraintSet</a>. </p><p class="paragraph"> Consider the following example that lazily adds a dependency to a configuration: </p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">configurations { conf }
configurations['conf'].dependencies.addLater(provider {
    project.dependencies.create(&quot;com:example:1.0&quot;)
})
</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div> Similarly, instead of mutating an existing dependency, use dependency constraints instead. Consider the following example that uses a dependency constraint to prefer a specific version of a dependency if the dependency has not declared a preferred version itself. If the dependency has declared a version, the preferred version constraint will be ignored: <div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">configurations { conf }
dependencies {
    conf(&quot;com:example&quot;)

    constraints {
        conf(&quot;com:example&quot;) {
            version {
                prefer(&quot;2.0&quot;)
            }
        }
    }
}
</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div> In some cases, using this method may still be necessary: <ul><li>Adding excludes: This method may be used to lazily add excludes to a Configuration. Adding excludes to declared dependencies should be handled with <a href="../../org.gradle.api.artifacts.dsl/-component-metadata-handler/index.html">component metadata rules</a></li><li>Mutating configuration hierarchy: Mutating a configuration's hierarchy (<a href="extends-from.html">extendsFrom</a>) after declaration is highly discouraged. However, doing so is possible with this method. </li></ul><span class="kdoc-tag"><h4 class="">Since</h4><p class="paragraph">4.4</p></span><span class="kdoc-tag"><h4 class="">Return</h4><p class="paragraph">this</p></span><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":docs/java_api" data-filterable-set=":docs/java_api"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>action</span></span></u></div></span></div><div><div class="title"><p class="paragraph">a dependency action to execute before the configuration is used.</p></div></div></div></div></div></div>  </div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>Gradle Kotlin DSL Reference</span><span
                class="pull-right"><span>Generated by </span><a
                href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
            </div>
        </div>
    </div>
</body>
</html>
